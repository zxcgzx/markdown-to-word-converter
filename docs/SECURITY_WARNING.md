# ⚠️ 安全警告

## 重要声明

**本项目是学习性质的演示项目，不适合用于生产环境。**

## 已知安全问题

### 1. 🔴 前端权限系统无效

当前的权限系统完全在前端实现，存在以下问题：

- **密码明文硬编码**：所有密码直接写在 JavaScript 代码中，任何人都可以通过查看源码获取
- **权限验证可绕过**：通过浏览器控制台可以轻易修改权限状态
- **Session 存储不安全**：认证状态存储在 sessionStorage 中，可被任意篡改

**绕过示例**：
```javascript
// 在浏览器控制台执行以下代码即可获得超级管理员权限
currentUser = userPermissions['lingling'];
sessionStorage.setItem('userLevel', 'super_admin');
```

**解决方案**：
- 选项 A：完全移除权限系统，做成开源免费工具
- 选项 B：添加后端服务，使用数据库存储用户信息，实现真正的权限控制

### 2. 🔴 API 密钥安全风险

AI 功能中的 API 密钥存储方式存在严重安全隐患：

- **明文存储在 localStorage**：即使有简单编码也形同虚设
- **容易被 XSS 攻击窃取**：任何第三方脚本都能读取
- **浏览器插件可以访问**：恶意插件可以轻易获取密钥

**当前实现**：
```javascript
localStorage.setItem('aiConfig', JSON.stringify(config)); // 危险！
```

**建议**：
- **不要在生产环境中使用本功能**
- 仅在本地或受信任环境中测试
- 定期更换 API 密钥
- 监控 API 密钥使用情况

**正确的做法**：
- 后端代理服务保管 API 密钥
- 前端只发送文档内容，不涉及密钥

### 3. ⚠️ XSS 攻击风险

代码中存在多处使用 `innerHTML` 插入内容的情况：

- Markdown 内容可能包含恶意脚本
- 没有进行 HTML 转义处理
- 用户输入未经过滤直接渲染

**建议**：
- 使用 DOMPurify 等库清理用户输入
- 改用 `textContent` 和 DOM API
- 对用户输入进行严格过滤

### 4. ℹ️ 其他安全注意事项

- **CDN 依赖**：所有外部库都通过 CDN 加载，存在供应链风险
- **本地存储**：大量使用 localStorage，可能泄露敏感信息
- **文件上传**：缺少文件类型和大小验证

## 使用建议

### ✅ 适合的使用场景

- 个人学习和研究
- 本地离线使用
- 受信任的内网环境
- 临时文档转换（不涉及敏感信息）

### ❌ 不适合的使用场景

- 公开的生产环境
- 处理敏感文档
- 企业级应用
- 需要真实权限控制的场景

## 免责声明

1. **本项目仅供学习交流使用**
2. **使用者需自行承担一切安全风险**
3. **开发者不对任何数据泄露或损失负责**
4. **强烈建议在使用前进行安全审计**

## 改进计划

如果您想将本项目用于生产环境，需要进行以下改进：

1. **移除或重新设计权限系统**
   - 使用后端服务进行认证
   - 实现 JWT 或 OAuth 认证
   - 添加 HTTPS 支持

2. **修复 API 密钥安全问题**
   - 创建后端代理服务
   - API 密钥存储在服务端
   - 实现密钥轮换机制

3. **加强 XSS 防护**
   - 引入 DOMPurify
   - 实现内容安全策略(CSP)
   - 严格过滤用户输入

4. **其他安全加固**
   - 添加 CSRF 保护
   - 实现速率限制
   - 添加安全头
   - 定期安全审计

---

**最后更新时间**：2025-11-10
**版本**：v2.1
